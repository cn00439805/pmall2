(function(e){function t(t){for(var r,a,c=t[0],u=t[1],l=t[2],s=0,f=[];s<c.length;s++)a=c[s],i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);h&&h(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},i={app:0},o=[];function c(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-2d21711c":"183296bd","chunk-3b85f879":"537a7b08","chunk-7f5dc1a4":"98261a53","chunk-5e0f0b00":"a1897fec","chunk-5e986eaa":"9757b88e","chunk-5e9b06f8":"0d12192b","chunk-84b31036":"c35639ab","chunk-875f75e4":"f637dff9","chunk-8fa5f4a2":"47523899"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-3b85f879":1,"chunk-7f5dc1a4":1,"chunk-5e0f0b00":1,"chunk-5e986eaa":1,"chunk-5e9b06f8":1,"chunk-84b31036":1,"chunk-875f75e4":1,"chunk-8fa5f4a2":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2d21711c":"31d6cfe0","chunk-3b85f879":"e6b25efd","chunk-7f5dc1a4":"31b5c7f6","chunk-5e0f0b00":"e4456981","chunk-5e986eaa":"1fd28ead","chunk-5e9b06f8":"2a2910a4","chunk-84b31036":"e2e9042a","chunk-875f75e4":"b963d955","chunk-8fa5f4a2":"0ad140aa"}[e]+".css",i=u.p+r,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var l=o[c],s=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(s===r||s===i))return t()}var f=document.getElementsByTagName("style");for(c=0;c<f.length;c++){l=f[c],s=l.getAttribute("data-href");if(s===r||s===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.request=r,delete a[e],h.parentNode.removeChild(h),n(o)},h.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(h)}).then(function(){a[e]=0}));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=i[e]=[t,n]});t.push(r[2]=o);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=c(e),l=function(t){s.onerror=s.onload=null,clearTimeout(f);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}i[e]=void 0}};var f=setTimeout(function(){l({type:"timeout",target:s})},12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var f=0;f<l.length;f++)t(l[f]);var h=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0312":function(e,t,n){"use strict";var r=n("dbd9"),a=n.n(r);a.a},"1a44":function(e,t,n){},"2fb4":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("8973"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rela-layer",attrs:{id:"app"}},[n("div",{staticClass:"abs-layer"},[n("div",{staticClass:"container"},[n("div",{staticClass:"main",class:e.getClass},[n("keep-alive",{attrs:{include:e.include}},[n("router-view")],1)],1),n("transition",{attrs:{name:"fadeTop"}},[e.isHeaderShow?n("header-nav",{attrs:{title:e.$route.meta.title}}):e._e()],1),n("transition",{attrs:{name:"fadeBottom"}},[e.isBottomShow?n("bottom-nav"):e._e()],1)],1)])])},i=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isShow?n("div",{staticClass:"bottom_nav"},e._l(e.nav,function(t,r){return n("a",{class:e.getClass(t,e.name),on:{click:function(n){return e.pageTo(t.path)}}},[n("i",{class:t.iconCls}),n("span",[e._v(e._s(t.title))]),e.trolleyNumber&&"Trolley"===t.name?n("em",{staticClass:"bubble"},[e._v(e._s(e.trolleyNumber))]):e._e()])}),0):e._e()},c=[],u=n("52c1");function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=[{title:"首页",iconCls:"iconfont icon-home",name:"Home",path:"/home"},{title:"购物车",iconCls:"iconfont icon-cart4e",name:"Trolley",path:"/trolley"},{title:"我的",name:"My",iconCls:"iconfont icon-user",path:"/my"}],h={name:"BottomNav",data:function(){return{nav:f}},computed:l({},Object(u["c"])({name:function(e){return e.bottomNav.name},isShow:function(e){return e.bottomNav.isShow}}),Object(u["b"])(["trolleyNumber"])),methods:{getClass:function(e,t){return{curr:e.name===t}},pageTo:function(e){this.$router.push({path:e})},pageToChildren:function(e){var t="".concat(this.$route.path,"/").concat(e);this.$router.push({path:t})}}},d=h,m=(n("81c9"),n("fc05")),p=Object(m["a"])(d,o,c,!1,null,"18ee9204",null),v=p.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isShow?n("div",{staticClass:"header-nav ui-flex justify-space-between align-center"},[n("div",{staticClass:"header-nav-left"},[n("a",{staticClass:"ui-flex align-center justify-center",attrs:{href:"javascript:;"},on:{click:function(t){return e.goBack()}}},[n("i",{staticClass:"iconfont icon-xiaoyuhao"})])]),n("h2",[e._v(e._s(e.title))]),e._m(0)]):e._e()},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-nav-right"},[n("a",{staticClass:"ui-flex align-center justify-center",attrs:{href:"javascript:;"}},[n("i",{staticClass:"iconfont icon-sousuo"})])])}];function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k={name:"HeaderNav",data:function(){return{}},props:{title:{type:String,default:""}},computed:g({},Object(u["c"])({isShow:function(e){return e.headerNav.isShow}})),methods:{goBack:function(){this.$router.go(-1)}}},S=k,O=(n("0312"),Object(m["a"])(S,b,y,!1,null,"659cc0b0",null)),P=O.exports;function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){j(e,t,n[t])})}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T={name:"App",data:function(){return{}},computed:N({getClass:function(){return{"has-header":this.isHeaderShow,"has-bottom":this.isBottomShow}}},Object(u["c"])({isHeaderShow:function(e){return e.headerNav.isShow},isBottomShow:function(e){return e.bottomNav.isShow},include:function(e){return e.pages.keepalive.include}})),components:{headerNav:P,bottomNav:v}},_=T,C=(n("823a"),Object(m["a"])(_,a,i,!1,null,"35f50d0e",null)),E=C.exports,x=(n("2fb4"),n("081a")),A=n("50c1"),D={isShow:null},B={},H={changeHeaderVisible:function(e,t){e.isShow=t},setHeaderNav:function(e,t){var n=t.meta.headerNav;n?this.commit("changeHeaderVisible",!!n.isShow):this.commit("changeHeaderVisible",!1)}},M={},$={state:D,getters:B,actions:M,mutations:H},I=["Home","Trolley","My"],V={isShow:null,name:""},q={},J={changeVisible:function(e,t){e.isShow=t},setNav:function(e,t){I.includes(t)&&(e.name=t)},setBottomNav:function(e,t){if(I.includes(t.name))return this.commit("changeVisible",!0),void this.commit("setNav",t.name);var n=t.meta.btmNav;n?(this.commit("changeVisible",!!n.isShow),n.showName&&this.commit("setNav",n.showName)):this.commit("changeVisible",!1)}},R={},L={state:V,getters:q,actions:R,mutations:J};function z(e){return K(e)||G(e)||F()}function F(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function G(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function K(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var Q={keepalive:{include:[]},position:{list:{}}},U={getPosition:function(e){return function(t){var n=e.position.list;return n[t]&&n[t].position}}},W={addInclude:function(e,t){if(""!==t){var n=e.keepalive,r=new Set(n.include);r.add(t),n.include=z(r)}},delInclude:function(e,t){if(t){var n=e.keepalive,r=new Set(n.include);r.delete(t),n.include=z(r)}},setPosition:function(e,t){var n=t.path,a=t.scrollTop,i=e.position.list;this.commit("setPath",n),r["a"].set(i[n],"position",a)},delPosition:function(e,t){var n=t.path,r=e.position.list;r[n]&&delete r[n]},setPath:function(e,t){var n=e.position.list;n[t]||r["a"].set(n,t,{})}},X={},Y={state:Q,getters:U,actions:X,mutations:W},Z={list:[]},ee={getTrolleyDetail:function(e){return function(t){var n=e.list.filter(function(e){return e.pid==t});return n.length?n[0]:null}},trolleyNumber:function(e){if(!e.list.length)return 0;var t=e.list.map(function(e){return e.num}),n=t.reduce(function(e,t){return e+t});return n},trolleyAmount:function(e){if(!e.list.length)return 0;var t=e.list,n=0;return n=t.length<2?t[0].num*t[0].price:e.list.reduce(function(e,t){return e+=t.num*t.price,e},n),n},hasChildren:function(e){return!!e.list.length}},te={addTrolleyProduct:function(e,t){var n=t.detail,r=t.num;n=JSON.parse(JSON.stringify(n));var a=this.getters.getTrolleyDetail(n.pid);if(!a)return n.num=r,void e.list.push(n);a.num+=r},delTrolleyProduct:function(e,t){var n;e.list.forEach(function(e,r){e.pid==t&&(n=r)}),null!=n&&e.list.splice(n,1)},addTrolleyProductNumber:function(e,t){var n=t.pid,r=t.num,a=this.getters.getTrolleyDetail(n),i=a.num+r;i>99||(a.num=i)},subTrolleyProductNumber:function(e,t){var n=t.pid,r=t.num,a=this.getters.getTrolleyDetail(n),i=a.num-r;i<=0||(a.num=i)}},ne={},re={state:Z,getters:ee,actions:ne,mutations:te};r["a"].use(u["a"]);var ae=new u["a"].Store({plugins:[Object(A["a"])({reducer:function(e){return{trolley:e.trolley}}})],state:{},mutations:{},modules:{headerNav:$,bottomNav:L,pages:Y,trolley:re}}),ie=function(){return Promise.all([n.e("chunk-2d21711c"),n.e("chunk-3b85f879")]).then(n.bind(null,"bc13"))},oe=function(){return n.e("chunk-875f75e4").then(n.bind(null,"da0f"))},ce=function(){return n.e("chunk-8fa5f4a2").then(n.bind(null,"5b6b"))},ue=function(){return n.e("chunk-5e986eaa").then(n.bind(null,"4467"))},le=function(){return n.e("chunk-84b31036").then(n.bind(null,"f0e3"))},se=function(){return n.e("chunk-5e9b06f8").then(n.bind(null,"fad2"))},fe=function(){return n.e("chunk-5e0f0b00").then(n.bind(null,"78d8"))},he=function(){return Promise.all([n.e("chunk-2d21711c"),n.e("chunk-7f5dc1a4")]).then(n.bind(null,"7397"))};r["a"].use(x["a"]);var de=new x["a"]({routes:[{path:"/",redirect:"home"},{path:"/home",name:"Home",component:ie,meta:{title:"首页",keepalive:["ProductDetail"]}},{path:"/trolley",name:"Trolley",component:oe,meta:{title:"购物车",headerNav:{isShow:!0}}},{path:"/order",name:"Order",component:ue,redirect:{name:"OrderAll"},meta:{title:"我的订单",keepalive:["ProductDetail"],headerNav:{isShow:!0},btmNav:{isShow:!0,showName:"My"}},children:[{path:"all",name:"OrderAll",component:le,meta:{title:"我的订单",keepalive:["ProductDetail"],headerNav:{isShow:!0},btmNav:{isShow:!0,showName:"My"}}},{path:"pendingPay",name:"PendingPay",component:se,meta:{title:"待支付订单",keepalive:["ProductDetail"],headerNav:{isShow:!0},btmNav:{isShow:!0,showName:"My"}}},{path:"pendingReceive",name:"PendingReceive",component:fe,meta:{title:"待收货订单",keepalive:["ProductDetail"],headerNav:{isShow:!0},btmNav:{isShow:!0,showName:"My"}}}]},{path:"/productDetail/:id",name:"ProductDetail",component:he,meta:{title:"订单详情"}},{path:"/my",name:"My",component:ce,meta:{title:"我的",keepalive:["Order","OrderAll","PendingPay","PendingReceive"]}},{path:"*",redirect:"/"}]}),me=function(e,t){return!t.meta.keepalive||!t.meta.keepalive.includes(e.name)},pe=function(e,t){return!!t.meta.keepalive&&!!t.meta.keepalive.includes(e.name)},ve=function(e,t){return!e.meta.keepalive||!e.meta.keepalive.includes(t.name)};de.beforeEach(function(e,t,n){if(ae.commit("addInclude",e.name),me(e,t)&&(ae.commit("delInclude",t.name),ae.commit("delPosition",{path:t.path})),ve(e,t)&&(e.matched.forEach(function(e){ae.commit("delInclude",e.name)}),ae.commit("delPosition",{path:e.path})),pe(e,t)){var r=t.path,a=document.querySelector(".main"),i=a.scrollTop;t.matched.forEach(function(e){ae.commit("addInclude",e.name)}),ae.commit("setPosition",{path:r,scrollTop:i})}ae.commit("setHeaderNav",e),ae.commit("setBottomNav",e),n()});var be=de;r["a"].mixin({created:function(){var e=document.querySelector(".main");e&&(e.scrollTop=0)},activated:function(){var e=document.querySelector(".main");if(e){var t=this.$route.path,n=ae.getters.getPosition(t);e.scrollTop=n||0}}});var ye=n("aae9"),ge=n.n(ye);r["a"].use(ge.a),r["a"].config.productionTip=!1,new r["a"]({router:be,store:ae,render:function(e){return e(E)}}).$mount("#app")},"81c9":function(e,t,n){"use strict";var r=n("1a44"),a=n.n(r);a.a},"823a":function(e,t,n){"use strict";var r=n("d6f7"),a=n.n(r);a.a},d6f7:function(e,t,n){},dbd9:function(e,t,n){}});
//# sourceMappingURL=app.f4889913.js.map